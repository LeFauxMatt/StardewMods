{
    "Changes": [
        {
            "LogName": "Quality Wine Bottles",
			"Action": "Load",
			"Target": "{{ModId}}/Wine/Base, {{ModId}}/Wine/Top",
            "FromFile": "assets/wines/{{TargetWithoutPath}}.png"
        },
        {
            "LogName": "Wine Label Overlay",
			"Action": "Load",
			"Target": "{{ModId}}/Overlays/Wine",
            "FromFile": "assets/overlays/{{TargetWithoutPath}}.png",
            "When": {
                "CustomWineLabels": "true"
            }
        },
        {
            "LogName": "Load Untinted Quality Wine Bottles",
            "Action": "EditData",
            "Target": "furyx639.SpritePatcher/Patches",
            "When": {
                "TintedWineBottles": "false",
                "QualityWineBottles": "true"
            },
            "Entries": {
                "{{ModId}}/WineBaseLayer": {
                    "Target": "Maps/springobjects",
                    "DrawMethods": ["Menu", "Held", "World"],
                    "PatchMode": "Replace",
                    "Priority": 10,
                    "Code": "
                        if (entity is not SObject obj) return false;
                        if (obj.preserve.Value is not SObject.PreserveType.Wine) return false;
                        this.Path = $`{this.ModId}/{obj.preserve.Value}/Base`;
                        this.Area = obj.Quality switch
                        {
                            // Silver
                            1 => new Rectangle(16, 0, 16, 16),
                            // Gold
                            2 => new Rectangle(32, 0, 16, 16),
                            // Iridium
                            4 => new Rectangle(48, 0, 16, 16),
                            // Default
                            _ => new Rectangle(0, 0, 16, 16),
                        };
                        return true;
                    "
                }
            }
        },
        {
            "LogName": "Load Quality Tinted Wine Bottles",
            "Action": "EditData",
            "Target": "furyx639.SpritePatcher/Patches",
            "When": {
                "TintedWineBottles": "true",
                "QualityWineBottles": "true"
            },
            "Entries": {
                "{{ModId}}/WineBaseLayer": {
                    "Target": "Maps/springobjects",
                    "DrawMethods": ["Menu", "Held", "World"],
                    "PatchMode": "Replace",
                    "Priority": 10,
                    "Code": "
                        if (entity is not SObject obj) return false;
                        if (obj.preserve.Value is not SObject.PreserveType.Wine) return false;
                        this.Path = $`{this.ModId}/{obj.preserve.Value}/Base`;
                        this.Area = obj.Quality switch
                        {
                            // Silver
                            1 => new Rectangle(16, 0, 16, 16),
                            // Gold
                            2 => new Rectangle(32, 0, 16, 16),
                            // Iridium
                            4 => new Rectangle(48, 0, 16, 16),
                            // Default
                            _ => new Rectangle(0, 0, 16, 16),
                        };
                        this.Tint = obj.preservedParentSheetIndex.Value switch
                        {
                            // Blueberry
                            `258` => new Color(6, 59, 206),
                            // Ancient Fruit
                            `454` => new Color(0, 113, 155),
                            // Apple
                            `613` => new Color(191, 0, 0),
                            // Default
                            _ => null,
                        };
                        return true;
                    "
                },
                "{{ModId}}/WineTopLayer": {
                    "Target": "Maps/springobjects",
                    "DrawMethods": ["Menu", "Held", "World"],
                    "PatchMode": "Overlay",
                    "Priority": 5,
                    "Code": "
                        if (entity is not SObject obj) return false;
                        if (obj.preserve.Value is not SObject.PreserveType.Wine) return false;
                        this.Path = $`{this.ModId}/{obj.preserve.Value}/Top`;
                        this.Area = obj.Quality switch
                        {
                            // Silver
                            1 => new Rectangle(16, 0, 16, 16),
                            // Gold
                            2 => new Rectangle(32, 0, 16, 16),
                            // Iridium
                            4 => new Rectangle(48, 0, 16, 16),
                            // Default
                            _ => new Rectangle(0, 0, 16, 16),
                        };
                        return true;
                    "
                }
            }
        },
        {
            "LogName": "Load Sprite Patches",
            "Action": "EditData",
            "Target": "furyx639.SpritePatcher/Patches",
            "When": {
                "CustomWineLabels": "true"
            },
            "Entries": {
                "{{ModId}}/WineOverlay": {
                    "Target": "Maps/springobjects",
                    "DrawMethods": ["Menu", "Held", "World"],
                    "PatchMode": "Overlay",
                    "Priority": 1,
                    "Code": "
                        if (entity is not SObject obj) return false;
                        if (obj.preserve.Value is not SObject.PreserveType.Wine) return false;
                        this.Path = $`{this.ModId}/Overlays/{obj.preserve.Value}`;
                        this.Area = obj.preservedParentSheetIndex.Value switch
                        {
                            // Blueberry
                            `258` => new Rectangle(16, 0, 16, 16),
                            // Ancient Fruit
                            `454` => new Rectangle(32, 0, 16, 16),
                            // Apple
                            `613` => new Rectangle(48, 0, 16, 16),
                            // Default
                            _ => new Rectangle(0, 0, 16, 16),
                        };
                        return true;
                    "
                }
            }
        }
    ]
}